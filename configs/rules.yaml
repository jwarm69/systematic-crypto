# Trading rule configuration
# Each rule outputs a forecast scaled to [-20, +20]

rules:
  # Phase 1: EWMAC variants (trend-following group)
  ewmac_16_64:
    type: "ewmac"
    fast_span: 16
    slow_span: 64
    enabled: true
    phase: 1

  ewmac_8_32:
    type: "ewmac"
    fast_span: 8
    slow_span: 32
    enabled: true
    phase: 2

  ewmac_32_128:
    type: "ewmac"
    fast_span: 32
    slow_span: 128
    enabled: true
    phase: 2

  # Phase 2: Carry (own group - uncorrelated with trend)
  carry:
    type: "carry"
    smooth_days: 90
    enabled: true
    phase: 2

  # Phase 2: Breakout (trend-following group, correlated with EWMAC)
  breakout_20:
    type: "breakout"
    lookback: 20
    enabled: true
    phase: 2

  breakout_80:
    type: "breakout"
    lookback: 80
    enabled: true
    phase: 2

  # Phase 2: Momentum (trend-following group)
  momentum:
    type: "momentum"
    lookback: 252
    enabled: true
    phase: 2

  # Phase 2: Mean reversion (own group - negatively correlated with trend)
  mean_reversion:
    type: "mean_reversion"
    lookback: 20
    z_cap: 3.0
    enabled: true
    phase: 2

  # Phase 4: ML-enhanced forecast (own group - partially uncorrelated with rules)
  ml_forecast:
    type: "ml_forecast"
    n_cv_splits: 4
    n_optuna_trials: 30
    feature_selection_k: 25
    enabled: true               # Phase 4 gate passed
    phase: 4

# Forecast scaling parameters (Carver standard)
forecast_scaling:
  cap: 20                 # Max absolute forecast
  target_abs: 10          # Target average absolute forecast
  scalar_lookback: 250    # Days for computing scalar
